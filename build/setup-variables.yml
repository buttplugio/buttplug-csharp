steps:
  - task: Bash@3
    displayName: "Set Up Build Variables"
    inputs:
      targetType: inline
      script: |
        gitCurrentTag=$(git tag --points-at HEAD --sort -version:refname | head -1)
        gitShortHash=$(git describe --long --always --dirty)
        gitVersion=`if [[ -z $gitCurrentTag ]]; then echo $gitShortHash; else echo $gitCurrentTag; fi;`
        echo "Git Current Tag: $gitCurrentTag"
        echo "Git Short Hash: $gitShortHash"
        echo "Git Version for Build: $gitVersion"
        echo "##vso[task.setvariable variable=gitCurrentTag]$gitCurrentTag"
        echo "##vso[task.setvariable variable=gitVersion]$gitVersion"
        echo "##vso[task.setvariable variable=cliBuildName]buttplug-csharp-${{ parameters.platform }}-cli-$(buildConfiguration)-$gitVersion"
