steps:
  - template: "./setup-variables.yml"
  - task: DotNetCoreCLI@2
    displayName: "Publish Project"
    inputs:
      publishWebProjects: false
      zipAfterPublish: true
      command: 'publish'
      arguments: '--configuration $(buildConfiguration)Standard -r ${{ parameters.dotNetPublishPlatform }} -f ${{ parameters.framework }} --self-contained true --output $(Build.ArtifactStagingDirectory)/$(cliBuildName) Buttplug.Server.CLI/Buttplug.Server.CLI.csproj'
  - task: PublishPipelineArtifact@0
    inputs:
      targetPath: '$(Build.ArtifactStagingDirectory)'
      artifactName: '${{ parameters.platform }}-$(buildConfiguration)'
